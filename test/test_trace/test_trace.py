#!/usr/bin/env python
# coding: utf-8
from Trace.trace_helper import *
import sys
reload(sys)
sys.setdefaultencoding('utf8')

# trace1 = [{
# 		"lng": 116.33939925532,
# 		"lat": 40.002301881948
# 	}, {
# 		"lng": 116.33939925532,
# 		"lat": 40.0023919023
# 	}, {
# 		"lng": 116.33920926371,
# 		"lat": 40.000733380731
# 	}, {
# 		"lng": 116.33932999597,
# 		"lat": 39.998552700912
# 	}, {
# 		"lng": 116.3285390112,
# 		"lat": 39.998332162518
# 	}
# ]
#
#
#
# trace2 = [{
#   "lng": 117.53939925532,
#   "lat": 40.002301881948
# }, {
#   "lng": 117.53939925532,
#   "lat": 40.0023919023
# }, {
#   "lng": 113.53920926371,
#   "lat": 40.000733380731
# }, {
#   "lng": 110.53932999597,
#   "lat": 39.998552700912
# }]
#
#
# trace3 = [{
#   "lng": 116.33939925532,
#   "lat": 40.002301881948
# }, {
#   "lng": 116.33939925532,
#   "lat": 40.0023919023
# }, {
#   "lng": 116.33920926371,
#   "lat": 40.000733380731
# }, {
#   "lng": 116.33932999597,
#   "lat": 39.998552700912
# }]
#
#
#
# trace4 = [{
#   "lng": 116.33929925532,
#   "lat": 40.102301881948
# }, {
#   "lng": 116.33939925532,
#   "lat": 40.0023919023
# }, {
#   "lng": 116.31920926371,
#   "lat": 40.002733380731
# }, {
#   "lng": 116.33932999597,
#   "lat": 39.998552700912
# }]

trace1 = [{
    "lng": 116.33939925532,
    "lat": 40.002301881948
}, {
    "lng": 116.13939925532,
    "lat": 40.1023919023
}, {
    "lng": 116.33920926371,
    "lat": 40.000733380731
}, {
    "lng": 116.23932999597,
    "lat": 39.298552700912
}, {
    "lng": 116.3285390112,
    "lat": 39.998332162518
}
]

trace2 = [{
    "lng": 116.33939925532,
    "lat": 40.002301881948
}, {
    "lng": 116.33939925532,
    "lat": 40.0023919023
}, {
    "lng": 116.33920926371,
    "lat": 40.000733380731
}, {
    "lng": 116.33932999597,
    "lat": 39.998552700912
}
]

trace3 = [{
    "lng": 116.03939925532,
    "lat": 40.002301881948
}, {
    "lng": 116.03939925532,
    "lat": 40.3023919023
}, {
    "lng": 116.03920926371,
    "lat": 40.300733380731
}, {
    "lng": 116.33932999597,
    "lat": 39.998552700912
}, {
    "lng": 116.1285390112,
    "lat": 39.298332162518
}
]

trace4 = [{
    "lng": 116.13939925532,
    "lat": 40.102301881948
}, {
    "lng": 116.33939925532,
    "lat": 40.0023919023
}, {
    "lng": 116.33920926371,
    "lat": 40.000733380731
}, {
    "lng": 116.33932999597,
    "lat": 39.998552700912
}, {
    "lng": 116.3285390112,
    "lat": 39.998332162518
}
]

name1 = 'user1'
name2 = 'user2'
name3 = 'user3'
name4 = 'user4'
delete_trace(name1, trace1)
delete_trace(name2, trace2)
delete_trace(name3, trace3)
delete_trace(name4, trace4)

context = get_Context(name1)
context['trace'] = trace1
set_Context(name1, context)
add_trace(name1, trace1)

context = get_Context(name2)
context['trace'] = trace2
set_Context(name2, context)
add_trace(name2, trace2)

context = get_Context(name3)
context['trace'] = trace3
set_Context(name3, context)
add_trace(name3, trace3)

context = get_Context(name4)
context['trace'] = trace4
set_Context(name4, context)
# add_trace(name4, trace4)

result = get_similar_names(name4, trace4)
for e in result:
    print e

trace1 = [{u'lat': 31.177635999651, u'lng': 121.39989231522}, {u'lat': 31.177689372053, u'lng': 121.40016144755},
          {u'lat': 31.177300702865, u'lng': 121.40027113065}, {u'lat': 31.177710844589, u'lng': 121.40321083544},
          {u'lat': 31.176515635623, u'lng': 121.40419690539}, {u'lat': 31.175288896968, u'lng': 121.40090892757},
          {u'lat': 31.1763766802, u'lng': 121.40426670373}, {u'lat': 31.1512916604, u'lng': 121.41613646359},
          {u'lat': 31.135187292411, u'lng': 121.42662319228}, {u'lat': 31.126323585031, u'lng': 121.43234773397},
          {u'lat': 31.150449819863, u'lng': 121.5691233716}, {u'lat': 31.152777842828, u'lng': 121.59703587973},
          {u'lat': 31.160764781744, u'lng': 121.64776777324}, {u'lat': 31.160865597225, u'lng': 121.65062465425},
          {u'lat': 31.165468848027, u'lng': 121.67835839958}, {u'lat': 31.175000091219, u'lng': 121.7062732433},
          {u'lat': 31.188391122047, u'lng': 121.74570822638}, {u'lat': 31.192198818611, u'lng': 121.75835367304},
          {u'lat': 31.163406729602, u'lng': 121.80945261418}, {u'lat': 31.162437068677, u'lng': 121.80938326499},
          {u'lat': 31.158767531336, u'lng': 121.80947605995}]

trace2 = [{u'lat': 31.177635999651, u'lng': 121.39989231522}, {u'lat': 31.177689372053, u'lng': 121.40016144755},
          {u'lat': 31.177300702865, u'lng': 121.40027113065}, {u'lat': 31.177710844589, u'lng': 121.40321083544},
          {u'lat': 31.176515635623, u'lng': 121.40419690539}, {u'lat': 31.175288896968, u'lng': 121.40090892757},
          {u'lat': 31.1763766802, u'lng': 121.40426670373}, {u'lat': 31.1512916604, u'lng': 121.41613646359},
          {u'lat': 31.135187292411, u'lng': 121.42662319228}, {u'lat': 31.126323585031, u'lng': 121.43234773397},
          {u'lat': 31.150449819863, u'lng': 121.5691233716}, {u'lat': 31.152777842828, u'lng': 121.59703587973},
          {u'lat': 31.160764781744, u'lng': 121.64776777324}, {u'lat': 31.160865597225, u'lng': 121.65062465425},
          {u'lat': 31.165468848027, u'lng': 121.67835839958}, {u'lat': 31.175000091219, u'lng': 121.7062732433},
          {u'lat': 31.188391122047, u'lng': 121.74570822638}, {u'lat': 31.192198818611, u'lng': 121.75835367304},
          {u'lat': 31.163406729602, u'lng': 121.80945261418}, {u'lat': 31.162437068677, u'lng': 121.80938326499},
          {u'lat': 31.158767531336, u'lng': 121.80947605995}]

trace3 = [{u'lat': 31.177635999651, u'lng': 121.39989231522}, {u'lat': 31.177689372053, u'lng': 121.40016144755},
          {u'lat': 31.178716031803, u'lng': 121.39989249488}, {u'lat': 31.179207653561, u'lng': 121.40228450279},
          {u'lat': 31.185744471738, u'lng': 121.39971543887}, {u'lat': 31.195471503766, u'lng': 121.42780724877},
          {u'lat': 31.196979844311, u'lng': 121.4310361181}, {u'lat': 31.206302644596, u'lng': 121.43613966119},
          {u'lat': 31.208594071559, u'lng': 121.44177140793}, {u'lat': 31.23148688469, u'lng': 121.4869071276},
          {u'lat': 31.232849675158, u'lng': 121.49067219548}, {u'lat': 31.233402844779, u'lng': 121.49116401775},
          {u'lat': 31.234548465183, u'lng': 121.49385291563}, {u'lat': 31.234602036739, u'lng': 121.49441462607},
          {u'lat': 31.236418665557, u'lng': 121.51269828726}, {u'lat': 31.237029398145, u'lng': 121.51553298013},
          {u'lat': 31.244339662657, u'lng': 121.51438341857}, {u'lat': 31.247852258084, u'lng': 121.51170592917},
          {u'lat': 31.246344582771, u'lng': 121.50976882317}, {u'lat': 31.245696554316, u'lng': 121.51031867597},
          {u'lat': 31.245024362837, u'lng': 121.50963964683}, {u'lat': 31.244904805022, u'lng': 121.50977960283},
          {u'lat': 31.244814499793, u'lng': 121.50969965364}]


name1 = 'user1'
name2 = 'user2'
name3 = 'user3'
# name4 = 'user4'
delete_trace(name1, trace1)
delete_trace(name2, trace2)
delete_trace(name3, trace3)
# delete_trace(name4, trace4)

context = get_Context(name1)
context['trace'] = trace1
set_Context(name1, context)
add_trace(name1, trace1)

context = get_Context(name2)
context['trace'] = trace2
set_Context(name2, context)
add_trace(name2, trace2)

context = get_Context(name3)
context['trace'] = trace3
set_Context(name3, context)
add_trace(name3, trace3)

# context = get_Context(name4)
# context['trace'] = trace4
# set_Context(name4, context)
# add_trace(name4, trace4)

result = get_similar_names(name3, trace3)
for e in result:
    print e

context = get_Context('丁铖')
print context['place_b']